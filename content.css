/* =============================================================================
   Focus Timer — Content Script CSS (Phase 4)
   Injected globally. All selectors are namespaced to avoid collisions.
   ============================================================================= */

/* ─── Page-level states ─────────────────────────────────────────────────────── */

html.__ft_blurred__ > body {
  filter: blur(12px) brightness(0.55) !important;
  pointer-events: none !important;
  user-select: none !important;
  transition: filter 0.4s ease !important;
}

/* ─── Focus Indicator Bar ───────────────────────────────────────────────────── */
#__ft_indicator__ {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  height: 36px !important;
  background: linear-gradient(135deg, rgba(13,15,20,0.96) 0%, rgba(26,30,48,0.96) 100%) !important;
  border-bottom: 1px solid rgba(129,140,248,0.25) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
  z-index: 2147483646 !important;
  /* backdrop-filter: blur(8px) !important; */
  /* -webkit-backdrop-filter: blur(8px) !important; */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
  animation: ft-slide-down 0.3s ease both !important;
  box-shadow: 0 1px 20px rgba(129,140,248,0.12) !important;
}

@keyframes ft-slide-down {
  from { transform: translateY(-100%); opacity: 0; }
  to   { transform: translateY(0);     opacity: 1; }
}

#__ft_indicator__ .ft-ind-dot {
  width: 7px !important;
  height: 7px !important;
  background: #818cf8 !important;
  border-radius: 50% !important;
  box-shadow: 0 0 8px rgba(129,140,248,0.8) !important;
  animation: ft-dot-pulse 2s ease-in-out infinite !important;
  flex-shrink: 0 !important;
}

@keyframes ft-dot-pulse {
  0%, 100% { opacity: 1; box-shadow: 0 0 8px rgba(129,140,248,0.8); }
  50%       { opacity: 0.5; box-shadow: 0 0 14px rgba(129,140,248,0.4); }
}

#__ft_indicator__ .ft-ind-text {
  font-size: 12px !important;
  font-weight: 500 !important;
  color: rgba(200,203,220,0.85) !important;
  letter-spacing: 0.04em !important;
  line-height: 1 !important;
}

/* ─── Distraction Overlay ────────────────────────────────────────────────────── */
#__ft_distract__ {
  position: fixed !important;
  inset: 0 !important;
  z-index: 2147483647 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
}

#__ft_distract__ .ft-d-backdrop {
  position: absolute !important;
  inset: 0 !important;
  background: rgba(6, 8, 14, 0.7) !important;
}

#__ft_distract__ .ft-d-card {
  position: relative !important;
  z-index: 1 !important;
  background: #13161e !important;
  border: 1px solid rgba(129,140,248,0.22) !important;
  border-radius: 20px !important;
  padding: 40px 34px !important;
  text-align: center !important;
  max-width: 380px !important;
  width: calc(100vw - 48px) !important;
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.5),
    0 32px 80px rgba(0,0,0,0.7),
    0 0 60px rgba(129,140,248,0.07) !important;
  animation: ft-card-in 0.32s cubic-bezier(0.34, 1.56, 0.64, 1) both !important;
}

@keyframes ft-card-in {
  from { opacity: 0; transform: translateY(24px) scale(0.95); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

#__ft_distract__ .ft-d-icon {
  margin-bottom: 18px !important;
  display: flex !important;
  justify-content: center !important;
}

#__ft_distract__ .ft-d-icon svg {
  animation: ft-spin 10s linear infinite !important;
}

@keyframes ft-spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

#__ft_distract__ .ft-d-title {
  font-size: 22px !important;
  font-weight: 700 !important;
  color: #e8eaf2 !important;
  margin: 0 0 10px !important;
  letter-spacing: -0.02em !important;
  line-height: 1.2 !important;
}

#__ft_distract__ .ft-d-sub {
  font-size: 14px !important;
  color: #5a6080 !important;
  line-height: 1.6 !important;
  margin: 0 0 28px !important;
}

#__ft_distract__ .ft-d-actions {
  display: flex !important;
  flex-direction: column !important;
  gap: 10px !important;
}

#__ft_distract__ .ft-d-btn {
  padding: 13px 24px !important;
  border-radius: 12px !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  border: none !important;
  outline: none !important;
  letter-spacing: 0.01em !important;
  font-family: inherit !important;
}

#__ft_distract__ .ft-d-primary {
  background: #818cf8 !important;
  color: #0d0f14 !important;
  box-shadow: 0 0 22px rgba(129,140,248,0.35) !important;
}

#__ft_distract__ .ft-d-primary:hover {
  background: #9aa5fb !important;
  box-shadow: 0 0 30px rgba(129,140,248,0.5) !important;
  transform: translateY(-1px) !important;
}

#__ft_distract__ .ft-d-ghost {
  background: transparent !important;
  color: #3d4465 !important;
  border: 1px solid rgba(255,255,255,0.07) !important;
}

#__ft_distract__ .ft-d-ghost:hover {
  color: #5a6080 !important;
  border-color: rgba(255,255,255,0.12) !important;
}

/* ─── Session Complete Overlay ───────────────────────────────────────────────── */
#__ft_session_overlay__ {
  position: fixed !important;
  inset: 0 !important;
  z-index: 2147483647 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
}

#__ft_session_overlay__ .ft-so-backdrop {
  position: absolute !important;
  inset: 0 !important;
  background: rgba(6, 8, 14, 0.88) !important;
  backdrop-filter: blur(14px) !important;
  -webkit-backdrop-filter: blur(14px) !important;
}

#__ft_session_overlay__ .ft-so-card {
  position: relative !important;
  z-index: 1 !important;
  background: #13161e !important;
  border: 1px solid rgba(129,140,248,0.22) !important;
  border-radius: 22px !important;
  padding: 32px 28px 26px !important;
  max-width: 400px !important;
  width: calc(100vw - 40px) !important;
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.5),
    0 40px 100px rgba(0,0,0,0.7),
    0 0 80px rgba(129,140,248,0.08) !important;
  animation: ft-card-in 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) both !important;
}

#__ft_session_overlay__ .ft-so-header {
  display: flex !important;
  align-items: center !important;
  gap: 20px !important;
  margin-bottom: 20px !important;
}

#__ft_session_overlay__ .ft-so-ring-wrap {
  position: relative !important;
  width: 90px !important;
  height: 90px !important;
  flex-shrink: 0 !important;
}

#__ft_session_overlay__ .ft-so-ring-wrap svg {
  width: 90px !important;
  height: 90px !important;
}

#__ft_session_overlay__ .ft-so-ring-track {
  fill: none !important;
  stroke: rgba(255,255,255,0.06) !important;
  stroke-width: 5 !important;
}

#__ft_session_overlay__ .ft-so-ring-fill {
  fill: none !important;
  stroke-width: 5 !important;
  stroke-linecap: round !important;
  transition: stroke-dashoffset 1s ease !important;
}

#__ft_session_overlay__ .ft-so-score {
  position: absolute !important;
  inset: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 22px !important;
  font-weight: 400 !important;
  color: #e8eaf2 !important;
  font-family: 'DM Mono', 'Courier New', monospace !important;
}

#__ft_session_overlay__ .ft-so-meta {
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
}

#__ft_session_overlay__ .ft-so-complete {
  font-size: 17px !important;
  font-weight: 700 !important;
  color: #e8eaf2 !important;
  letter-spacing: -0.01em !important;
}

#__ft_session_overlay__ .ft-so-ql {
  font-size: 12px !important;
  font-weight: 700 !important;
  letter-spacing: 0.12em !important;
  text-transform: uppercase !important;
}

#__ft_session_overlay__ .ft-so-duration {
  font-size: 13px !important;
  color: #5a6080 !important;
}

#__ft_session_overlay__ .ft-so-divider {
  height: 1px !important;
  background: rgba(255,255,255,0.06) !important;
  margin-bottom: 18px !important;
}

#__ft_session_overlay__ .ft-so-prompt {
  font-size: 14px !important;
  color: #8890b0 !important;
  margin-bottom: 10px !important;
  font-weight: 500 !important;
}

#__ft_session_overlay__ .ft-so-textarea {
  width: 100% !important;
  background: #1a1e2e !important;
  border: 1px solid rgba(255,255,255,0.07) !important;
  border-radius: 10px !important;
  padding: 11px 13px !important;
  color: #e8eaf2 !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
  font-size: 13px !important;
  line-height: 1.6 !important;
  resize: none !important;
  outline: none !important;
  transition: border-color 0.2s !important;
  box-sizing: border-box !important;
  display: block !important;
}

#__ft_session_overlay__ .ft-so-textarea::placeholder {
  color: #363d58 !important;
}

#__ft_session_overlay__ .ft-so-textarea:focus {
  border-color: rgba(129,140,248,0.45) !important;
}

#__ft_session_overlay__ .ft-so-hint {
  font-size: 10px !important;
  color: #363d58 !important;
  text-align: right !important;
  margin-top: 5px !important;
  margin-bottom: 16px !important;
}

#__ft_session_overlay__ .ft-so-actions {
  display: flex !important;
  gap: 9px !important;
}

#__ft_session_overlay__ .ft-so-btn {
  padding: 11px 16px !important;
  border-radius: 11px !important;
  font-size: 13px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
  outline: none !important;
  font-family: inherit !important;
}

#__ft_session_overlay__ .ft-so-save {
  flex: 1 !important;
  background: #818cf8 !important;
  border: none !important;
  color: #0c0e14 !important;
  box-shadow: 0 0 18px rgba(129,140,248,0.3) !important;
}

#__ft_session_overlay__ .ft-so-save:hover {
  filter: brightness(1.1) !important;
  box-shadow: 0 0 26px rgba(129,140,248,0.4) !important;
}

#__ft_session_overlay__ .ft-so-skip {
  background: transparent !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
  color: #3d4465 !important;
  padding: 11px 18px !important;
}

#__ft_session_overlay__ .ft-so-skip:hover {
  color: #5a6080 !important;
  border-color: rgba(255,255,255,0.12) !important;
}
